<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:35 GMT -->
  <head>
    <meta charset="utf-8" />
    <title>Evara Dashboard</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/adminassets/imgs/theme/favicon.svg"
    />
    <!-- Template CSS -->
    <link href="/adminassets/css/main.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <div class="screen-overlay"></div>

    <section class="content-main">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="card mb-4">
            <div class="card-header justify-content-center">
              <h6>Edit Product</h6>
            </div>
            <div class="card-body">
              <form
                id="productForm"
                method="post"
                action="/admin/edit-submit-product/<%= product._id%>"
                enctype="multipart/form-data">
                <div class="row">
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label for="brand_name" class="form-label">Brand</label>
                      <select class="form-select" id="brand" name="brand">
                        <option value="ASUS" <%= (product.brand === "ASUS") ? "selected" : "" %>>ASUS</option>
                        <option value="LG" <%= (product.brand === "LG") ? "selected" : "" %>>LG</option>
                        <option value="SAMSUNG" <%= (product.brand === "SAMSUNG") ? "selected" : "" %>>SAMSUNG</option>
                        <option value="HP" <%= (product.brand === "HP") ? "selected" : "" %>>HP</option>
                        <option value="DELL" <%= (product.brand === "DELL") ? "selected" : "" %>>DELL</option>
                    </select>
                    
                      <div
                        id="brandError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label for="product_name" class="form-label"
                        >Product Name</label
                      >
                      <input
                        type="text"
                        placeholder="Enter Product Name"
                        class="form-control"
                        id="product_name"
                        name="productName"
                        value="<%= product.productName%>"
                      />
                      <div
                        id="product_nameError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label class="form-label">Model Year</label>
                      <div class="row gx-2">
                        <input
                          placeholder="Year Of Model"
                          type="text"
                          class="form-control"
                          id="model_year"
                          name="modelYear"
                          value="<%=product.modelYear %>"
                        />
                        <div
                          id="model_yearError"
                          class="error-message text-danger"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label for="ram_size" class="form-label">RAM Size</label>
                      <select class="form-select" id="ram_size" name="ramSize">
                        <option value="4GB" <%= (product.ramSize === '4GB') ? 'selected' : '' %>>4GB</option>
                        <option value="8GB" <%= (product.ramSize === '8GB') ? 'selected' : '' %>>8GB</option>
                        <option value="16GB" <%= (product.ramSize === '16GB') ? 'selected' : '' %>>16GB</option>
                        <option value="32GB" <%= (product.ramSize === '32GB') ? 'selected' : '' %>>32GB</option>
                    </select>
                      <div
                        id="ram_sizeError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label for="storage" class="form-label">Storage</label>
                      <select class="form-select" id="storage" name="storage">
                        <option value="256GB" <%= (product.storage === '256GB') ? 'selected' : '' %>>256GB</option>
                        <option value="512GB" <%= (product.storage === '512GB') ? 'selected' : '' %>>512GB</option>
                        <option value="1024GB" <%= (product.storage === '1024GB') ? 'selected' : '' %>>1024GB</option>
                    </select>
                    
                      <div
                        id="storageError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <label class="form-label">Operating System</label>
                    <select class="form-select" id="operating_system" name="operatingSystem">
                      <option value="Microsoft Windows" <%= (product.operatingSystem === 'Microsoft Windows') ? 'selected' : '' %>>Microsoft Windows</option>
                      <!-- Add more options if needed -->
                  </select>
                  
                    <div
                      id="operating_systemError"
                      class="error-message text-danger"
                    ></div>
                  </div>
                </div>

                <div class="mb-4 mt-20">
                  <label class="form-label">Full description</label>
                  <textarea
                    
                    placeholder="Type here"
                    class="form-control"
                    id="full_description"
                    name="fullDescription"
                  ><%= product.description%></textarea>
                  <div
                    id="full_descriptionError"
                    class="error-message text-danger"
                  ></div>
                </div>
                <div class="row">
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label class="form-label">Category</label>
                      <select class="form-select" id="category" name="category">
                        <% categoryColl.forEach((e) => {  %>
                            <% if (product.category.categoryName == e.categoryName) { %>
                              <option value="<%= e.categoryName %>"  selected>
                                <%= e.categoryName %>
                            </option>
                            <% } else { %>
                              <option value="<%= e.categoryName %>">
                                <%= e.categoryName %>
                            </option>
                        <% }}) %>
                    </select>         
                      <div
                        id="categoryError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label class="form-label">Stock</label>
                      <input
                        placeholder=""
                        type="number"
                        class="form-control"
                        id="stock"
                        name="stock"
                        value="<%= product.stock%>"
                      />
                      <div
                        id="stockError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label class="form-label">Regular price</label>
                      <div class="row gx-2">
                        <input
                          placeholder="₹"
                          type="number"
                          class="form-control"
                          id="regular_price"
                          name="regularPrice"
                          value="<%= product.regularPrice%>"
                        />
                        <div
                          id="regular_priceError"
                          class="error-message text-danger"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-4">
                      <label class="form-label" for="sales_price"
                        >Sales price</label
                      >
                      <input
                        placeholder="₹"
                        type="number"
                        class="form-control"
                        id="sales_price"
                        name="salesPrice"
                        value="<%=
                      product.salesPrice%>"
                      />
                      <div
                        id="sales_priceError"
                        class="error-message text-danger"
                      ></div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-12">
                  <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between">
                      <h4>Images</h4>
                      
                  </div>
                  
                      <div class="card-body">
                          
                          <div id="imagesError" class="error-message text-danger"></div>
                          <div class="d-flex overflow-auto">
                            <div
                                id="image-preview"
                                class="image-container overflow-auto m-2" 
                                style="max-height: 250px; margin: 10px;"
                            ></div>
                        </div>
                        
                          
                          <div class="d-flex overflow-auto">
                            
                              <% product.images.forEach(e => {console.log(e); %>
                                
                                  <div class="m-2 text-center">
                                      <img class="mb-2" src="<%= e.path %>" alt="product Image" >
                                      <div><a href="/admin/edit-delete-image?SingleImgId=<%= e._id%>&productId=<%= product._id %>" class="btn btn-danger">Delete</a></div>
                                  </div>
                              <% }) %>
                          </div>
                      </div>
                  </div>
                  </div>
              
              

                    <div class="row">
                    <div class="d-flex align-items-center justify-content-center">
                      <button
                        class="btn btn-md rounded font-lg hover-up"
                        type="submit"
                      >
                      Submit
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <!-- card end// -->
        </div>
      </div>
    </section>
    <!-- content-main end// -->
    <footer class="main-footer font-xs">
      <div class="row pb-30 pt-15">
        <div class="col-sm-6">
          <script>
            document.write(new Date().getFullYear());
          </script>
          ©, Evara - HTML Ecommerce Template .
        </div>
        <div class="col-sm-6">
          <div class="text-sm-end">All rights reserved</div>
        </div>
      </div>
    </footer>
    <script>
      function validateForm() {
        const errors = {};
        const brand = document.getElementById("brand").value;
        const productName = document.getElementById("product_name").value;
        const modelYear = document.getElementById("model_year").value;
        const ramSize = document.getElementById("ram_size").value;
        const storage = document.getElementById("storage").value;
        const operatingSystem =
          document.getElementById("operating_system").value;
        const fullDescription =
          document.getElementById("full_description").value;
        const category = document.getElementById("category").value;
        const salesPrice = document.getElementById("sales_price").value;
        const regularPrice = document.getElementById("regular_price").value;
        const stock = document.getElementById("stock").value;
        const images = document.getElementById("images").files;

        // Brand
        if (!brand) {
          errors["brand"] = "Brand is required.";
          document.getElementById("brandError").textContent = errors["brand"];
        } else {
          clearErrorMessages();
        }

        // Product Name
        if (!productName || productName.trim() == "") {
          errors["product_name"] = "Product Name is required.";
          document.getElementById("product_nameError").textContent =
            errors["product_name"];
        } else {
          clearErrorMessages();
        }

        // Model Year
        if (!modelYear) {
          errors["model_year"] = "Model Year is required.";
          document.getElementById("model_yearError").textContent =
            errors["model_year"];
        } else if (!/^\d+$/.test(modelYear)) {
          errors["model_year"] = "Model Year must be a number.";
          document.getElementById("model_yearError").textContent =
            errors["model_year"];
        } else {
          clearErrorMessages();
        }

        // RamSize
        if (!ramSize) {
          errors["ram_size"] = "Ram Size is required.";
          document.getElementById("ram_sizeError").textContent =
            errors["ram_size"];
        } else {
          clearErrorMessages();
        }

        // Storage
        if (!storage) {
          errors["storage"] = "Storage is required.";
          document.getElementById("storageError").textContent =
            errors["storage"];
        } else {
          clearErrorMessages();
        }

        // Operating System
        if (!operatingSystem) {
          errors["operating_system"] = "Operating System is required.";
          document.getElementById("operating_systemError").textContent =
            errors["operating_system"];
        } else {
          clearErrorMessages();
        }

        // Full description
        if (!fullDescription) {
          errors["full_description"] = "description is required.";
          document.getElementById("full_descriptionError").textContent =
            errors["full_description"];
        } else {
          clearErrorMessages();
        }

        // Category
        if (!category) {
          errors["category"] = "Category is required.";
          document.getElementById("categoryError").textContent =
            errors["category"];
        } else {
          clearErrorMessages();
        }

        // Stock

        if (!stock) {
          errors["stock"] = "Stock is required.";
          document.getElementById("stockError").textContent = errors["stock"];
        } else if (parseInt(stock) < 0) {
          errors["stock"] = "Stock cannot be negative.";
          document.getElementById("stockError").textContent = errors["stock"];
        } else {
          clearErrorMessages();
        }

        // Regular price

        if (!regularPrice) {
          errors["regular_price"] = "Regular price is required.";
          document.getElementById("regular_priceError").textContent =
            errors["regular_price"];
        } else if (parseFloat(regularPrice) < 0) {
          errors["regular_price"] = "Regular price cannot be negative.";
          document.getElementById("regular_priceError").textContent =
            errors["regular_price"];
        } else {
          clearErrorMessages();
        }

        // Sales price

        if (!salesPrice) {
          errors["sales_price"] = "Sales price is required.";
          document.getElementById("sales_priceError").textContent =
            errors["sales_price"];
        } else if (parseFloat(salesPrice) < 0) {
          errors["sales_price"] = "Sales price cannot be negative.";
          document.getElementById("sales_priceError").textContent =
            errors["sales_price"];
        } else {
          clearErrorMessages();
        }

        // Images

        if (!images || images.length < 2) {
          errors["images"] = "At least two image is required.";
          document.getElementById("imagesError").textContent = errors["images"];
        } else {
          clearErrorMessages();
        }

        return errors;
      }

      const form = document.getElementById("productForm");
      form.addEventListener("submit", (event) => {
        const errors = validateForm();
        if (Object.keys(errors).length > 0) {
          // Display errors to the user
          console.error(errors);
          event.preventDefault();
        } else {
          // Submit the form
          form.submit();
          console.log("form submitted");
        }
      });
      function clearErrorMessages() {
        const errorElements = document.querySelectorAll(".error-message");
        errorElements.forEach((element) => {
          element.textContent = "";
        });
      }
      function previewImage() {
        const preview = document.getElementById("image-preview");
        const fileInput = document.getElementById("images");
        const files = fileInput.files;

        preview.innerHTML = "";

        for (const file of files) {
          if (file.type.startsWith("image/")) {
            const reader = new FileReader();

            reader.onload = function (e) {
              const img = document.createElement("img");
              img.src = e.target.result;
              img.style.maxWidth = "100%";
              img.style.maxHeight = "200px";
              preview.appendChild(img);
            };

            reader.readAsDataURL(file);
          }
        }
      }

    </script>
    <script src="/adminassets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="/adminassets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="/adminassets/js/vendors/select2.min.js"></script>
    <script src="/adminassets/js/vendors/perfect-scrollbar.js"></script>
    <script src="/adminassets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="/adminassets/js/main.js" type="text/javascript"></script>
  </body>

  <!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:32 GMT -->
</html>
