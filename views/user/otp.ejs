<!DOCTYPE html>
<html class="no-js" lang="en">
  <!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/index-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:26:07 GMT -->
  <head>
    <meta charset="utf-8" />
    <title>VeeLap</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/userassets/imgs/theme/favicon.svg"
    />
    <!-- Template CSS -->
    <link rel="stylesheet" href="/userassets/css/main.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
  </head>

  <style>
    /* Remove the spinner controls for number input */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"] {
      -webkit-appearance: none;
      margin: 0;
    }
    body {
      background: linear-gradient(to bottom, #e9e5e5, #088178);
    }
  </style>
  <body>
    <div class="d-flex align-items-center justify-content-center vh-100">
      <div class="card">
        <div
          class="card-header d-flex align-items-center justify-content-center col-8 col-md-12"
        >
          Verify OTP
        </div>
        <div class="card-body">
          <form method="post" action="/user/verify-otp" id="formotp">
            <div
              class="mb-3 col-md-12 d-block justify-content-center align-items-center"
            >
              <p>
                Please enter the OTP that has been sent to
                <em id="USemail"><%=email%></em>
              </p>
              <p><% if(mess) { %> <%=mess %> <% }; %></p>
              <label
                for="otp"
                class="form-label d-flex justify-content-center align-items-center"
                >Enter OTP</label
              >
              <div class="d-flex align-items-center justify-content-center">
                <div class="col-6 align-items-center">
                  <input
                    type="hidden"
                    name="email"
                    value="<%=email%>"
                    id="email"
                  />
                  <input
                    type="hidden"
                    name="phone"
                    value="<%=phone%>"
                    id="phone"
                  />
                  <input
                    type="number"
                    class="form-control"
                    id="otp"
                    maxlength="6"
                    name="enteredOtp"
                    required
                  />
                  <input
                    type="hidden"
                    name="genOTP"
                    value="<%=generatedOTP%>"
                    id="realOtp"
                  />
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center">
              <button type="submit" class="btn btn-fill-out btn-block hover-up">
                Verify
              </button>
            </div>
            <div class="d-flex align-items-center justify-content-end">
              <span class="justify-content-end" id="timer">1:00</span>
            </div>

            <!-- <div class="d-flex justify-content-end">
              <a href="/user/emailAuth" style="display: none"> Resend OTP </a>
            </div> -->
          </form>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- <script>
      document.addEventListener("DOMContentLoaded", async function () {
        var USemail = document.getElementById("USemail").textContent;
        console.log(USemail);
        const data = {
          email: USemail,
        };
        console.log(data);
        var Resend = document.getElementById("timer");
        console.log(USemail);
        let oldOtp = document.getElementById("realOtp").value;
        console.log("old== " + oldOtp);

        console.log(formData);

        document
          .getElementById("formotp")
          .addEventListener("submit", function (event) {
            fetch("/user/verify-otp", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: data,
            })
              .then((response) => response.json())
              // Handle the response data as needed
              .then((data) => {
                console.log("Response:", data);
              })
              // Handle errors
              .catch((error) => {
                console.error("Error:", error);
              });

            // Set the initial timer duration to 1 minute (60 seconds)
            var timerDuration = 5;

            // Initial display of the timer
            updateTimer();

            // Start the countdown
            startCountdown();

            function startCountdown() {
              // Set a timeout to update the timer every second
              setTimeout(function update() {
                updateTimer();

                if (timerDuration > 0) {
                  // Continue the countdown
                  timerDuration--;
                  startCountdown();
                } else {
                  //  when timer reaches 0
                  const t = document.getElementById("timer");
                  t.innerHTML = "<a id='s' class='link-primary'>Resent Otp</a>";
                  const s = document.getElementById("s");
                  s.addEventListener("click", (event) => {
                    s.innerHTML =
                      "<p class='text-decoration-none list-unstyled text-secondary'> OTP has been resended successfully </p>";

                    fetch("/user/sendOtp", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify({
                        email: USemail,
                        phone: USphone,
                        newOtp: oldOtp,
                      }),
                    })
                      .then((response) => response.json())
                      // Handle the response data as needed
                      .then((data) => {
                        console.log("Response:", data);
                      })
                      // Handle errors
                      .catch((error) => {
                        console.error("Error:", error);
                      });
                  });
                }
              }, 1000);
            }
            function updateTimer() {
              var minutes = Math.floor(timerDuration / 60);
              var seconds = timerDuration % 60;
              document.getElementById("timer").textContent =
                "0" + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
            }
          });
      }); //dom content loaded ends
    </script> -->

    <script src="/userassets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/userassets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/userassets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/userassets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/userassets/js/plugins/slick.js"></script>
    <script src="/userassets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/userassets/js/plugins/wow.js"></script>
    <script src="/userassets/js/plugins/jquery-ui.js"></script>
    <script src="/userassets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/userassets/js/plugins/magnific-popup.js"></script>
    <script src="/userassets/js/plugins/select2.min.js"></script>
    <script src="/userassets/js/plugins/waypoints.js"></script>
    <script src="/userassets/js/plugins/counterup.js"></script>
    <script src="/userassets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/userassets/js/plugins/images-loaded.js"></script>
    <script src="/userassets/js/plugins/isotope.js"></script>
    <script src="/userassets/js/plugins/scrollup.js"></script>
    <script src="/userassets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/userassets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="/userassets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template  JS -->
    <script src="/userassets/js/main.js"></script>
    <script src="/userassets/js/shop.js"></script>
  </body>
</html>
